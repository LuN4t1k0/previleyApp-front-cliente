import FacturaFormModal from "@/components/modal/factura/FacturaFormModal";
import GenericModal from "@/components/modal/GenericModal";
import CreatePrefacturaAllEmpresasContent from "@/components/modal/prefactura/CreatePrefacturaAllEmpresasContent";
import CreatePrefacturaEmpresaContent from "@/components/modal/prefactura/CreatePrefacturaEmpresaContent";
import PrefacturaDetailsContent from "@/components/modal/PrefacturaDetailsContent";

import { RiArticleLine, RiFilePdf2Line } from "@remixicon/react";



const modulo= "Proformas";

const PrefacturaConfig = {
  // Rutas de la API
  createPath: "/prefactura/crear",
  updatePath: "/licencias-medicas/actualizar",
  resourcePath: "/prefacturas/prefacturas",
  deletePath: "/prefacturas/eliminar",
  filtersPath: "/prefacturas/filters/",
  detailPath: "prefacturas/detalle",
  bulkDeletePath: "/licencias-medicas/bulk-delete",
  bulkUploadPath: "/licencias-medicas/bulk-create",
  buildDetailEndpoint: (detailPath, folio) => `${detailPath}/${folio}`,

  // Información de UI
  title: modulo,
  subtitle: `Resumen de todas las ${modulo} registradas en PrevileyAPP.`,

  // Definición de los filtros y su mapeo a los parámetros de consulta
  filters: [
    {
      key: "filter1",
      type: "text",
      field: "folio",
      placeholder: "Buscar por folio...",
    },
    {
      key: "filter2",
      type: "multiselect",
      field: "estado",
      placeholder: "Estado Licencia...",
      options: "filter2",
    },
    {
      key: "filter3",
      type: "multiselect",
      field: "empresaRut",
      placeholder: "Empresa Rut...",
      options: "filter3",
    },
 
    {
      key: "dateRange",
      type: "dateRange",
      dateField: "fechaInicio",
      dateStartSuffix: "inicio",
      dateEndSuffix: "termino",
      placeholder: "Fecha de Depósito...",
      predefinedRanges: [
        // ... tus rangos predefinidos
      ],
    },
  ],

  // Columnas a excluir en la visualización de tablas
  excludeColumns: [
    "createdAt", "updatedAt", "id", "empleador", 
    "sucursal", "fechaOtorgamiento", "tipoLicencia", "telefonoTrabajador",
    "nombreProfesional", "rutProfesional", "direccionProfesional",
    "telefonoProfesional", "especialidad", "tipoReposo", "lugarReposo",
    "direccionReposo", 
    "nombreTrabajador",
    // "estadoLicencia", 
    "motivoAnulacion", "motivoRechazo",
    "motivoDevolucion", "fechaUltimaModificacion", "fechaRecepcion",
    "fechaPrimeraAfiliacion", "fechaContratoTrabajo", "profesionalRut",
    "sexoTrabajador", "edadTrabajador"
  ],

  // Columnas a formatear como moneda
  monetaryColumns: ["totalFacturado"],
  
  // Añadir configuración de las columnas ordenables:
  columnsConfig: [

   

    {
      header: "Factura",
      accessorKey: "factura",
      type: "link", // Enlace
      Icono: RiFilePdf2Line, // Ícono para el enlace
      label: "", // Texto para el enlace
      iconClass: "mr-2 text-red-500", // Clases para el ícono
    },
    
   
    {
      header: "Estado",
      accessorKey: "accionesEstado", // campo "falso", no existe en la DB
      type: "actions",  // usamos un "type" personalizado
      actions: [

        {
          id: "createFactura",
          icon: RiArticleLine,
          label: "Validar",
          iconClass: "text-green-500", 
          rolesAllowed: ["admin", "editor"],
          visibleWhen: (rowData) => rowData.estado === "pendiente",
        },
       
      ],
      meta: {
        align: "text-center", // opcional, para centrar
      },
    },
    
  ],

  // Columnas a formatear como fecha
  dateColumns: ["fechaGeneracion"], // Añade las columnas que necesites

  // Configuración de badges
  badgesConfig: {

    estado: {
      type: "status",
      variants: {
        "pendiente": "warning",
        "Rechazado": "error",
        "Aprobado": "success",
        "Reducida": "warning", // Usar warning como aproximación
        "Pagada": "success",   // Usar success como aproximación
        "TRAMITADA POR EMPLEADOR PARA CCAF": "warning",
        "TRAMITADA POR EMPLEADOR": "warning",
        "EMITIDA POR PROFESIONAL":"success",
        "AUTORIZADA":"success",
        "RECHAZADA": "error",
        "REDUCIDA": "warning",
        "facturada": "success",


      },
    },
  },

  // Configuración de modales
  modalsConfig: {
    createForEmpresa: {
      component: GenericModal,
      title: "Crear Prefactura para una Empresa",
      content: CreatePrefacturaEmpresaContent,
      rolesAllowed: ["admin"],
    },
    createForAllEmpresas: {
      component: GenericModal,
      title: "Crear Prefacturas para Todas las Empresas",
      content: CreatePrefacturaAllEmpresasContent,
      rolesAllowed: ["admin"],
    },
    createFactura: {
      component: GenericModal,
      title: "Agregar/Editar Licencia",
      content: FacturaFormModal,
      rolesAllowed: ["admin"],
    },
    licenciaDetails: {
      component: GenericModal,
      title: "PROFORMA",
      content: PrefacturaDetailsContent,
      rolesAllowed: ["admin", "previley", "editor","cliente"],
    },

    
  },
  actionsConfig: [
    {
      id: "createForEmpresa",
      modalName: "createForEmpresa",
      buttonText: "Prefactura Empresa",
      rolesAllowed: ["admin"],
      actionType: "createForEmpresa",
      color: "blue",
      icon: "RiFileAddFill",
    },
    {
      id: "createForAllEmpresas",
      modalName: "createForAllEmpresas",
      buttonText: "Prefacturas Todas",
      rolesAllowed: ["admin"],
      actionType: "createForAllEmpresas",
      color: "purple",
      icon: "RiBuilding2Fill",
    },
    // {
    //   id: "exportPDF",
    //   modalName: "exportarPDF",
    //   buttonText: "Exportar PDF",
    //   rolesAllowed: ["admin", "previley", "cliente"],
    //   actionType: "exportPDF",
    //   color: "red",
    //   icon: "RiFilePdf2Fill",
    // },
    // {
    //   id: "exportExcel",
    //   modalName: "exportarExcel",
    //   buttonText: "Exportar Excel",
    //   rolesAllowed: ["admin", "previley", "cliente"],
    //   actionType: "exportExcel",
    //   color: "green",
    //   icon: "RiFileExcel2Fill",
    // },
  ],
  
};

export default PrefacturaConfig;
